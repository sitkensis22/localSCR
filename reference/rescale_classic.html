<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Rescale inputs to prepare data for habitat mask to be used."><title>Function to rescale trap coordinates, grid extent, and starting activity 
center coordinates — rescale_classic • localSCR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Function to rescale trap coordinates, grid extent, and starting activity 
center coordinates — rescale_classic"><meta property="og:description" content="Rescale inputs to prepare data for habitat mask to be used."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">localSCR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/classic_scr.html">Classic SCR models: continuous state-space and marked individuals</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Function to rescale trap coordinates, grid extent, and starting activity 
center coordinates</h1>
      
      <div class="d-none name"><code>rescale_classic.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Rescale inputs to prepare data for habitat mask to be used.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">rescale_classic</span><span class="op">(</span><span class="va">X</span>, <span class="va">ext</span>, <span class="va">s.st</span>, <span class="va">site</span>, <span class="va">hab_mask</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>X</dt>
<dd><p>either a matrix or array representing the coordinates of traps in
UTMs. An array is used when traps are clustered over a survey area.</p></dd>
<dt>ext</dt>
<dd><p>an <code>Extent</code> object from the <code>raster</code> package. This is 
returned from <code><a href="grid_classic.html">grid_classic</a></code>.</p></dd>
<dt>s.st</dt>
<dd><p>a matrix of starting activity center coordinates. This is 
returned from <code><a href="initialize_classic.html">initialize_classic</a></code>
buffered by as an integer. This is typically 3 times the sigma parameter.</p></dd>
<dt>site</dt>
<dd><p>Either <code>NULL</code> (if a 2D trap array is used) or a vector of 
integers denoting which trap array an individual (either detected or 
augmented) belongs to. Note that <code>site</code> is provided from 
<code><a href="sim_classic.html">sim_classic</a></code> when a 3D trap array is used. However, this 
<code>site</code> variable must be correctly augmented based on the total 
augmented population size (i.e., <code>M</code>).</p></dd>
<dt>hab_mask</dt>
<dd><p>a matrix or arary output from <code><a href="mask_polygon.html">mask_polygon</a></code> or
<code><a href="mask_raster.html">mask_raster</a></code> functions.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a list of rescaled trap coordinates, grid extents, and starting 
activity center coordinates.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function is only meant to be used when habitat masking is 
incorporated into the model. The functions properly rescales inputs based on 
the dimensions of the habitat mask. Note that the <code>pixelWidth</code> needs to 
be included as an input in the model after inputs are rescaled to correctly
 estimate the scaling parameter (i.e., 'sigma').</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="mask_polygon.html">mask_polygon</a></code>, <code><a href="mask_raster.html">mask_raster</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Daniel Eacker</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># simulate a single trap array with random positional noise</span></span>
<span class="r-in"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">800</span>, <span class="fl">800</span>, length.out <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span class="r-in"><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">800</span>, <span class="fl">800</span>, length.out <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span class="r-in"><span class="va">traps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># add some random noise to locations</span></span>
<span class="r-in"><span class="va">traps</span> <span class="op">&lt;-</span> <span class="va">traps</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/prod.html" class="external-link">prod</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/dimensions.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">traps</span><span class="op">)</span><span class="op">)</span>,<span class="op">-</span><span class="fl">20</span>,<span class="fl">20</span><span class="op">)</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="va">mysigma</span> <span class="op">=</span> <span class="fl">300</span> <span class="co"># simulate sigma of 300 m</span></span>
<span class="r-in"><span class="va">mycrs</span> <span class="op">=</span> <span class="fl">32608</span> <span class="co"># EPSG for WGS 84 / UTM zone 8N</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># create grid</span></span>
<span class="r-in"><span class="va">Grid</span> <span class="op">=</span> <span class="fu"><a href="grid_classic.html">grid_classic</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">traps</span>, crs_ <span class="op">=</span> <span class="va">mycrs</span>, buff <span class="op">=</span> <span class="fl">3</span><span class="op">*</span><span class="va">mysigma</span>, res <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># create polygon to use as a mask</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span class="r-in"><span class="va">poly</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1765</span>,<span class="op">-</span><span class="fl">1765</span>,<span class="fl">1730</span>,<span class="op">-</span><span class="fl">1650</span>,<span class="fl">1600</span>,<span class="fl">1650</span>,</span>
<span class="r-in"><span class="fl">0</span>,<span class="fl">1350</span>,<span class="op">-</span><span class="fl">800</span>,<span class="fl">1700</span>,<span class="op">-</span><span class="fl">1850</span>,<span class="fl">1000</span>,<span class="op">-</span><span class="fl">1765</span>,<span class="op">-</span><span class="fl">1765</span><span class="op">)</span>,ncol<span class="op">=</span><span class="fl">2</span>, byrow<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, crs <span class="op">=</span>  <span class="va">mycrs</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># make simple plot</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">Grid</span><span class="op">$</span><span class="va">grid</span>, pch<span class="op">=</span><span class="fl">20</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></span><span class="op">(</span><span class="va">traps</span>, col<span class="op">=</span><span class="st">"blue"</span>,pch<span class="op">=</span><span class="fl">20</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://r-spatial.github.io/sf/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">poly</span>, add<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-plt img"><img src="rescale_classic-1.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># create habitat mask</span></span>
<span class="r-in"><span class="va">hab_mask</span> <span class="op">=</span> <span class="fu"><a href="mask_polygon.html">mask_polygon</a></span><span class="op">(</span>poly <span class="op">=</span> <span class="va">poly</span>, grid <span class="op">=</span> <span class="va">Grid</span><span class="op">$</span><span class="va">grid</span>, crs_ <span class="op">=</span> <span class="va">mycrs</span>, </span>
<span class="r-in">prev_mask <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># simulate SCR data</span></span>
<span class="r-in"><span class="va">data3d</span> <span class="op">=</span> <span class="fu"><a href="sim_classic.html">sim_classic</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">traps</span>, ext <span class="op">=</span> <span class="va">Grid</span><span class="op">$</span><span class="va">ext</span>, crs_ <span class="op">=</span> <span class="va">mycrs</span>, </span>
<span class="r-in">sigma_ <span class="op">=</span> <span class="va">mysigma</span>, prop_sex <span class="op">=</span> <span class="fl">1</span>, N <span class="op">=</span> <span class="fl">200</span>, K <span class="op">=</span> <span class="fl">4</span>, base_encounter <span class="op">=</span> <span class="fl">0.25</span>, </span>
<span class="r-in">enc_dist <span class="op">=</span> <span class="st">"binomial"</span>, hab_mask <span class="op">=</span> <span class="va">hab_mask</span>, setSeed <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># generate initial activity center coordinates for 2D trap array without </span></span>
<span class="r-in"><span class="co">#habitat mask</span></span>
<span class="r-in"><span class="va">s.st3d</span> <span class="op">=</span> <span class="fu"><a href="initialize_classic.html">initialize_classic</a></span><span class="op">(</span>y<span class="op">=</span><span class="va">data3d</span><span class="op">$</span><span class="va">y</span>, M<span class="op">=</span><span class="fl">500</span>, X<span class="op">=</span><span class="va">traps</span>, buff <span class="op">=</span> <span class="fl">3</span><span class="op">*</span><span class="va">mysigma</span>, </span>
<span class="r-in">hab_mask <span class="op">=</span> <span class="va">hab_mask</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># build rescaled constants list for 2D trap array</span></span>
<span class="r-in"><span class="va">constList</span> <span class="op">=</span> <span class="fu">rescale_classic</span><span class="op">(</span>X <span class="op">=</span> <span class="va">traps</span>, ext <span class="op">=</span> <span class="va">Grid</span><span class="op">$</span><span class="va">ext</span>, s.st <span class="op">=</span> <span class="va">s.st3d</span>, </span>
<span class="r-in">site <span class="op">=</span> <span class="cn">NULL</span>, hab_mask <span class="op">=</span> <span class="va">hab_mask</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">constList</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ X   : num [1:25, 1:2] 8.94 12.96 16.99 21.17 24.93 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "dimnames")=List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ : NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..$ : chr [1:2] "x" "y"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ ext :Formal class 'Extent' [package "raster"] with 4 slots</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..@ xmin: num 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..@ xmax: num 34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..@ ymin: num 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   .. ..@ ymax: num 34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ s.st: num [1:500, 1:2] 13.2 10.5 18.5 21.8 22.2 ...</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Daniel Eacker.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

